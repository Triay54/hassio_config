title: Domus
resources:
- url: /local/custom_ui/monster-card.js?v=3
  type: js
- url: /local/custom_ui/bignumber-card.js?v=1
  type: js
- url: /local/custom_ui/bignum-card.js
  type: js
- url: /local/custom_ui/weather-card.js
  type: js
- url: /local/custom_ui/entity-attributes-card.js?v=2
  type: js
- url: /local/custom_ui/floorplan/floorplan-lovelace.svg
  type: svg
- url: /local/custom_ui/wired-card.js?v=2
  type: module

views:
- id: home
  icon: mdi:home
  title: Quick Status
  cards:
  - type: entity-filter
    entities:
      - media_player.kodi
    state_filter:
      - 'playing'
    card:
      type: media-control
      entity: media_player.kodi

  - type: conditional
    conditions:
      - entity: sensor.season
        state_not: "summer"
    card:
      type: thermostat
      entity: climate.calefaccion

  - type: conditional
    conditions:
      - entity: sensor.season
        state: "summer"
    card:
      type: thermostat
      entity: climate.termostato_ac

  - type: picture-entity
    entity: camera.psychrometric_chart
    show_name: false
    show_state: false

  - type: entities
    title: Control
    show_header_toggle: false
    entities:
#    - entity: climate.termostato_ac
#      secondary_info: 'last-changed'
    - entity: script.play_kodi_pvr
      secondary_info: 'last-changed'
    - entity: cover.sonoff_cover_ventanal
      secondary_info: 'last-changed'
    - entity: cover.sonoff_cover_puerta_terraza
      secondary_info: 'last-changed'

  - type: iframe
    title: Floorplan
    url: /floorplan
    aspect_ratio: '160%'

  - type: vertical-stack
    cards:
    - type: entities
      title: Luces
      entities:
      - input_select.salon_light_scene
      - input_number.light_main_slider_salon
      - entity: input_number.light_temp_slider_salon
        name: 'Tª Color'
#    - type: glance
#      show_state: false
#      columns: 3
#      entities:
#      - entity: light.salon
#        tap_action: 'toggle'
#      - entity: light.dormitorio
#        tap_action: 'toggle'
#      - entity: light.estudio
#        tap_action: 'toggle'
#      - entity: light.hall_light
#        tap_action: 'toggle'
#      - entity: light.terraza
#        tap_action: 'toggle'
#    - type: vertical-stack
#      cards:
    - type: horizontal-stack
      cards:
      - type: entity-button
        name: Salón
        entity: light.salon
        service: light.toggle
        tap_action: call-service
#            theme: darkorange
      - type: entity-button
        name: Dormitorio
        entity: light.dormitorio
        service: light.toggle
        tap_action: call-service
#            theme: darkorange
    - type: horizontal-stack
      cards:
      - type: entity-button
        name: Estudio
        entity: light.estudio
        service: light.toggle
        tap_action: call-service
#            theme: darkorange
      - type: entity-button
        name: Hall
        entity: light.hall_light
        service: light.toggle
        tap_action: call-service
#            theme: darkorange
      - type: entity-button
        name: Terraza
        entity: light.terraza
        service: light.toggle
        tap_action: call-service
#            theme: darkorange

#  - type: vertical-stack
#    title: Luces
#    cards:
#    - type: glance
##      title: Salón
#      columns: 4
#      show_state: false
#      entities:
#      - entity: light.bola_grande
#        name: Bola
#        tap_action: 'toggle'
#      - entity: light.central
#        tap_action: 'toggle'
#      - entity: light.pie_tv
#        tap_action: 'toggle'
#      - entity: light.pie_sofa
#        tap_action: 'toggle'
##      - type: divider
#      - entity: light.cuenco
#        tap_action: 'toggle'
#      - entity: light.lamparita
#        tap_action: 'toggle'
#      - entity: light.tira
#        tap_action: 'toggle'
#      - entity: light.yeelight_strip_7811dca21ecf
#        tap_action: 'toggle'

#    - type: glance
##      title: Dormitorio
#      columns: 2
#      show_state: false
#      entities:
#      - entity: light.hue_habitacion
#        name: Dormitorio
#        tap_action: 'toggle'
#      - entity: light.aura_habitacion
#        name: Mesilla noche
#        tap_action: 'toggle'
#    - type: glance
#      show_state: false
#      columns: 2
##      title: Estudio
#      entities:
#      - entity: light.flexo
#        name: Techo estudio
#        tap_action: 'toggle'
#      - entity: light.go
#        name: Mesa estudio
#        tap_action: 'toggle'

    - type: horizontal-stack
      cards:
      - type: picture-entity
        entity: light.central
        tap_action: toggle
        hold_action: more-info
        name: Central
        show_state: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/salon_central_on.jpeg
          "off": /local/pictures/salon_central_off.jpeg
      - type: picture-entity
        entity: light.bola_grande
        name: Bola
        show_state: false
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/salon_bola_on.jpeg
          "off": /local/pictures/salon_bola_off.jpeg
      - type: picture-entity
        entity: light.tira
        name: Tira
        show_state: false
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/salon_tira_on.jpeg
          "off": /local/pictures/salon_tira_off.jpeg
      - type: picture-entity
        entity: light.yeelight_strip_7811dca21ecf
        name: Tira TV
        show_state: false
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/salon_tira_tv_on.jpeg
          "off": /local/pictures/salon_tira_tv_off.jpeg

    - type: horizontal-stack
      cards:
      - type: picture-entity
        entity: light.cuenco
        tap_action: toggle
        hold_action: more-info
        name: Cuenco
        show_state: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/salon_cuenco_on.jpeg
          "off": /local/pictures/salon_cuenco_off.jpeg
      - type: picture-entity
        entity: light.lamparita
        name: Lamparita
        show_state: false
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/salon_lamparita_on.jpeg
          "off": /local/pictures/salon_lamparita_off.jpeg
      - type: picture-entity
        entity: light.pie_sofa
        name: Pie sofá
        show_state: false
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/salon_pie_sofa_on.jpeg
          "off": /local/pictures/salon_pie_sofa_off.jpeg
      - type: picture-entity
        entity: light.pie_tv
        name: Pie TV
        show_state: false
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/salon_pie_tv_on.jpeg
          "off": /local/pictures/salon_pie_tv_off.jpeg

    - type: horizontal-stack
      cards:
      - type: picture-entity
        entity: light.hue_habitacion
        tap_action: toggle
        hold_action: more-info
        name: Techo
        show_state: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/dormitorio_techo_on.jpeg
          "off": /local/pictures/dormitorio_techo_off.jpeg
      - type: picture-entity
        entity: light.aura_habitacion
        name: Mesilla
        show_state: false
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/dormitorio_aura_on.jpeg
          "off": /local/pictures/dormitorio_aura_off.jpeg

    - type: horizontal-stack
      cards:
      - type: picture-entity
        entity: light.flexo
        name: Techo
        show_state: false
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/estudio_techo_on.jpeg
          "off": /local/pictures/estudio_techo_off.jpeg
      - type: picture-entity
        name: Mesa
        show_state: false
        entity: light.go
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/estudio_go_on.jpeg
          "off": /local/pictures/estudio_go_off.jpeg

    - type: horizontal-stack
      cards:
      - type: picture-entity
        entity: light.hall
        tap_action: toggle
        hold_action: more-info
        name: Hall
        show_state: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/hall_on.jpeg
          "off": /local/pictures/hall_off.jpeg
      - type: picture-entity
        entity: light.terraza
        name: Terraza
        show_state: false
        tap_action: toggle
        hold_action: more-info
#          show_name: false
        aspect_ratio: 1.
        state_image:
          "on": /local/pictures/kodi_on.jpeg
          "off": /local/pictures/kodi_off.jpeg

#  - type: horizontal-stack
  - type: vertical-stack
    cards:
#    - type: vertical-stack
#      cards:
    - type: entities
      show_header_toggle: false
      entities:
      - entity: vacuum.robot_aspirador
        secondary_info: 'last-changed'
  #    - type: "custom:entity-attributes-card"
  #      entity: vacuum.robot_aspirador
  #      attributes:
  #        - status
  #        - battery_level
      - input_select.vacuum_clean_combination
    - type: picture-entity
      entity: vacuum.robot_aspirador
  #    tap_action: toggle
#      hold_action: toggle
      hold_action: call-service
      service: vacuum.toggle
      show_name: false
      aspect_ratio: 1.
      state_image:
        "cleaning": /local/pictures/small_vacuum_out.jpeg
        "returning": /local/pictures/small_vacuum_return.jpeg
        "docked": /local/pictures/small_vacuum_docked.jpeg
        "error": /local/pictures/small_vacuum_error.jpeg
        # TODO make more images
  #      STATE_CODE_TO_STATE = {
  #          2: STATE_IDLE,
  #          5: STATE_CLEANING,
  #          6: STATE_RETURNING,
  #          8: STATE_DOCKED,
  #          9: STATE_ERROR,
  #          10: STATE_PAUSED,
        "idle": /local/pictures/small_vacuum_docked.jpeg
        "paused": /local/pictures/small_vacuum_docked.jpeg

  - type: entities
    title: Enchufes
    show_header_toggle: false
    secondary_info: 'last-changed'
    entities:
    - entity: switch.bomba_circ_acs
      secondary_info: 'last-changed'
    - entity: switch.calentador
      secondary_info: 'last-changed'
    - entity: switch.ac_dry_contact
      secondary_info: 'last-changed'
#    - entity: switch.altavoz
#      secondary_info: 'last-changed'
    - type: divider
    - entity: switch.office_floor
      secondary_info: 'last-changed'
    - entity: switch.test_switch_2
      secondary_info: 'last-changed'

  - type: history-graph
#    title: 'My Graph'
    entities:
      - entity: switch.calentador
        name: Heater
      - entity: switch.ac_dry_contact
        name: AC
      - entity: switch.bomba_circ_acs
        name: Bomba
#  - type: entity-filter
#    filter:
#      - domain: light
#        state: 'on'
#      - domain: light
#        state: 'off'
##      - entity_id: switch.driveway
##      - entity_id: switch.wemoporch
#    card:
#      title: Lights

- id: kodi
  icon: mdi:kodi
  title: Kodi
  cards:
  - type: media-control
    entity: media_player.kodi_tv

  - type: horizontal-stack
    title: Media select
    cards:
    - type: entity-button
      name: TVShows
      entity: script.recent_episodes
      service: script.turn_on
      tap_action: call-service
    - type: entity-button
      entity: script.recent_movies
      name: Pelis
      service: script.turn_on
      tap_action: call-service
    - type: entity-button
      name: TV
      entity: script.pvr_channels
      service: script.turn_on
      tap_action: call-service
    - type: entity-button
      name: Recorded
      entity: script.pvr_recordings
      service: script.turn_on
      tap_action: call-service

  - type: entities
#    show_header_toggle: false
    entities:
    - input_select.kodi_results
    - sensor.horas_de_tv

  - type: vertical-stack
    cards:
    - type: glance
      title: Kodi
      show_header_toggle: false
#      show_name: false
      show_state: false
      columns: 3
      entities:
      - entity: switch.tv_power
  #      tap_action: 'toggle'
        name: Enchufe
      - entity: script.play_kodi_pvr
        tap_action: 'toggle'
        name: Play
      - entity: script.stop_kodi
        tap_action: 'toggle'
        name: Stop
      - entity: script.update_library
        tap_action: 'toggle'
        name: Update
      - entity: script.quit_kodi
  #      tap_action: 'toggle'
        name: 'QUIT'
      - entity: script.restart_kodi_osmc
  #      tap_action: 'toggle'
        name: 'RESTART'

    - type: entities
      show_header_toggle: false
  #    title: Media search
      entities:
      - input_text.q_youtube
      - input_select.youtube_videos
  #  - type: entities
  #    title: Torrents
  #    entities:
#      - type: divider
      - input_text.q_torrents
      - script.torrent_search
  #    - weblink.buscador_de_torrents

  - type: sensor
    entity: sensor.horas_de_tv
    graph: line
    line_color: darkblue
    height: 200
    accuracy: 48
    hours_to_show: 24

  - type: media-control
    entity: media_player.home_cinema
#  - type: media-control
#    entity: media_player.htse5500_hte5500

- id: meteo
  icon: mdi:weather-partlycloudy
  title: El tiempo
  cards:
    - type: vertical-stack
      cards:
      - type: picture-entity
        entity: camera.psychrometric_chart
        show_name: false
        show_state: false
      - type: weather-forecast
        entity: weather.local_weather
      - type: picture-entity
        entity: camera.weather_svg
        show_name: false
        show_state: false
#      - sensor.psychrometric_evolution

    - type: vertical-stack
      cards:
      - type: entities
        title: Hoy
        entities:
        - sensor.dark_sky_summary
        - entity: sensor.dark_sky_hourly_summary
          name: '->'
      - type: glance
        columns: 3
        entities:
        - entity: sensor.dark_sky_apparent_temperature
          name: T. Aparente
        - entity: sensor.dark_sky_temperature
          name: T
        - entity: sensor.dark_sky_humidity
          name: HR
        - entity: sensor.dark_sky_daytime_high_temperature
          name: Máxima
        - entity: sensor.dark_sky_overnight_low_temperature
          name: Mínima
        - entity: sensor.dark_sky_pressure
          name: P

    - type: vertical-stack
      cards:
      - type: entities
        title: Mañana
        entities:
        - entity: sensor.dark_sky_daily_summary
          name: '>'
      - type: glance
        columns: 4
        entities:
        - sensor.dark_sky_temperature_1
        - sensor.dark_sky_apparent_temperature_1
        - sensor.dark_sky_dew_point_1
        - entity: sensor.dark_sky_humidity_1
          name: HR
        - entity: sensor.dark_sky_pressure_1
          name: P
        - entity: sensor.dark_sky_daytime_high_temperature_1
          name: Máxima
        - entity: sensor.dark_sky_overnight_low_temperature_1
          name: Mínima
      - type: glance
        title: Pasado mañana
        columns: 4
        entities:
        - sensor.dark_sky_temperature_2
        - sensor.dark_sky_apparent_temperature_2
        - sensor.dark_sky_dew_point_2
        - entity: sensor.dark_sky_humidity_2
          name: HR
        - entity: sensor.dark_sky_pressure_2
          name: P
        - entity: sensor.dark_sky_daytime_high_temperature_2
          name: Máxima
        - entity: sensor.dark_sky_overnight_low_temperature_2
          name: Mínima
      - type: glance
        title: En tres días
        columns: 4
        entities:
        - sensor.dark_sky_temperature_3
        - sensor.dark_sky_apparent_temperature_3
        - sensor.dark_sky_dew_point_3
        - entity: sensor.dark_sky_humidity_3
          name: HR
        - entity: sensor.dark_sky_pressure_3
          name: P
        - entity: sensor.dark_sky_daytime_high_temperature_3
          name: Máxima
        - entity: sensor.dark_sky_overnight_low_temperature_3
          name: Mínima

    - type: entities
      title: Deltas
      columns: 4
      entities:
      - entity: sensor.temp_change_galeria
        name: Galería
      - entity: sensor.temp_change_kitchen
        name: Cocina
      - entity: sensor.temp_change_study
        name: Estudio
      - entity: sensor.temp_change_office
        name: Office
      - entity: sensor.temp_change_bathroom_ac
        name: Baño
      - entity: sensor.temp_change_bedroom
        name: Dormitorio
      - entity: sensor.temp_change_livingroom
        name: Salón
      - entity: sensor.temp_change_terraza
        name: Terraza

- id: power
  icon: mdi:flash
  title: Consumos
  cards:
  - type: vertical-stack
    cards:
    - type: custom:gauge-card
      title: Potencia
      entity: sensor.esp32ener_power
      min: 250
      max: 5000
      scale: '60px'
      severity:
        red: 4000
        green: 300
        amber: 2500
    - type: horizontal-stack
      cards:
      - type: custom:gauge-card
        title: Consumo
        entity: sensor.esp32ener_consumption_day
        scale: '30px'
        min: 0
        max: 30
        severity:
          red: 20
          green: 5
          amber: 12
      - type: custom:gauge-card
        title: Precio
        scale: '30px'
        entity: sensor.pvpc
        min: 0
        max: 0.2
        severity:
          red: 0.15
          green: 0.02
          amber: 0.13

    - type: glance
#      title: Consumo eléctrico
      show_name: false
      column_width: 'calc(100% / 3)'
      entities:
      - sensor.esp32ener_ch1
      - sensor.esp32ener_ch2
      - sensor.esp32ener_ch3
      - entity: sensor.sonoff_pow_1
#        name: Termo
      - entity: binary_sensor.electricity_high_cost_interval
#        name: Punta
      - entity: sensor.elecprice_range
#        name: Precio

    - type: entities
      entities:
      - sensor.horas_de_ac
      - sensor.horas_de_termo
      - type: divider
  #    - switch.bomba_circ_acs
      - entity: switch.calentador
        secondary_info: 'last-changed'
      - entity: switch.ac_dry_contact
        secondary_info: 'last-changed'
      - type: weblink
        icon: mdi:chart-areaspline
        name: Consumo eléctrico
        url: !secret grafana_elec_url
#    - weblink.consumo_electrico
#      title: Consumo eléctrico
#  #    - sensor.esp32ener_power
#      - sensor.esp32ener_ch1
#      - sensor.esp32ener_ch3
#      - sensor.sonoff_pow_1
#      - binary_sensor.electricity_high_cost_interval
#  #    - sensor.pvpc
#      - sensor.elecprice_range
#  #    - sensor.esp32ener_consumption_day

  - type: iframe
    title: Consumo
    url: /grafana/dashboard-solo/db/para-ha-elec24h?refresh=1m&panelId=5&orgId=1&fullscreen
    aspect_ratio: 1.

  - type: iframe
    title: Coste
    url: /grafana/dashboard-solo/db/enerpi?refresh=1m&panelId=5&orgId=1&fullscreen
    aspect_ratio: '100%'

- id: alarm
  icon: mdi:shield-outline
  title: Alarm configuration
  cards:
  - type: vertical-stack
    cards:
    - type: entities
      title: Alarma
      entities:
      - entity: alarm_control_panel.alarma
        secondary_info: 'last-changed'
      - entity: sensor.current_alarm_level
        secondary_info: 'last-changed'

    - type: alarm-panel
      entity: alarm_control_panel.alarma
#    - type: glance
#      show_state: false
#      columns: 4
#      entities:
#      - entity: switch.camara
#      - entity: switch.motion_detection_sricam_360
#      - entity: switch.motion_detection_iegeek_hd
#      - entity: switch.motion_detection_kmoon_ipcam100

    - type: glance
      show_state: false
      columns: 4
      entities:
      - entity: binary_sensor.local_pir
        name: Cuadro
  #    - binary_sensor.motioncam_salon
  #    - binary_sensor.sensor_livingroom_mov1
      - entity: binary_sensor.sensor_kitchen_mov1
        name: Cocina
      - entity: binary_sensor.sensor_study_mov1
        name: Estudio
      - entity: binary_sensor.sensor_bedroom_mov1
        name: Dormitorio
  #    - binary_sensor.motioncam_office
  #    - binary_sensor.sensor_office_mov1
  #    - entity: binary_sensor.sensor_bathroom_ac_mov1
  #    - binary_sensor.motioncam_terraza
  #    - binary_sensor.sensor_terraza_mov1

#    - weblink.motioneye

  - type: picture-glance
    camera_image: camera.sricam_360
    title: Salón
    entities:
    - binary_sensor.motioncam_salon
    - binary_sensor.sensor_livingroom_mov1
    - switch.motion_detection_sricam_360

  - type: picture-glance
    camera_image: camera.iegeek_hd
    title: Office
    entities:
    - binary_sensor.motioncam_office
    - binary_sensor.sensor_office_mov1
    - switch.motion_detection_iegeek_hd

  - type: picture-glance
    camera_image: camera.kmoon_ipcam100
    title: Terraza
    entities:
    - binary_sensor.motioncam_terraza
    - binary_sensor.sensor_terraza_mov1
    - switch.motion_detection_kmoon_ipcam100

- id: status
  icon: mdi:castle
  title: Home Status
  cards:
  - type: vertical-stack
    panel: true
    cards:
#    - type: entities
#      title: Interior
#      entities:
#      - sensor.nonexistent
    - type: horizontal-stack
      cards:
      - type: vertical-stack
        cards:
        - type: custom:bignum-card
          title: Dormitorio (°C)
          entity: sensor.dormitorio_temperature_rpi2mpd
        - type: custom:bignum-card
          title: Salón (°C)
          entity: sensor.sensor_livingroom_temperature
        - type: custom:bignum-card
          title: Cocina (°C)
          entity: sensor.sensor_kitchen_temperature

      - type: vertical-stack
        cards:
        - type: custom:bignum-card
          title: Estudio (°C)
          entity: sensor.sensor_study_temperature
        - type: custom:bignum-card
          title: Office (°C)
          entity: sensor.sensor_office_temperature
        - type: custom:bignum-card
          title: Baño (°C)
          entity: sensor.sensor_bathroom_ac_temperature

#    - type: entities
#      title: Exterior
#      entities:
#      - sensor.nonexistent
    - type: divider
    - type: horizontal-stack
      cards:
  #    - type: custom:bignumber-card
      - type: custom:bignum-card
        title: Terraza (°C)
        entity: sensor.sensor_terraza_temperature
      - type: custom:bignum-card
        title: Galería (°C)
        entity: sensor.sensor_galeria_temperature

  - type: history-graph
#      title: Temperatura
    entities:
    - entity: sensor.temperatura_stats_mean
      name: Int
    - entity: sensor.temperatura_exterior
      name: Ext

  - type: history-graph
#      title: Humedad
    entities:
    - entity: sensor.humedad_stats_mean
      name: Int
    - entity: sensor.humedad_exterior
      name: Ext

  - type: entities
    entities:
    - climate.termostato_ac
  #  - sensor.temperatura_interior
    - sensor.temperatura_stats_mean
  #  - sensor.humedad_interior
    - sensor.humedad_stats_mean
    - sensor.temperatura_exterior
    - sensor.temperatura_minima
    - sensor.humedad_exterior

  - type: glance
    title: Electricidad
    columns: 3
    entities:
    - entity: sensor.esp32ener_power
      name: Potencia
    - entity: sensor.elecprice_range
      name: Precio
    - entity: sensor.esp32ener_consumption_day
      name: Consumo

  - type: glance
    title: Salón
    columns: 3
#    columns: 4
    show_name: false
    entities:
    - entity: sensor.sensor_livingroom_temperature
    - entity: sensor.sensor_livingroom_humidity
    - entity: sensor.sensor_livingroom_pressure
#    - entity: sensor.sensor_livingroom_illumination

  - type: glance
    title: Dormitorio
    show_name: false
    columns: 3
    entities:
    - entity: sensor.dormitorio_temperature_rpi2mpd
    - entity: sensor.dormitorio_humidity_rpi2mpd
    - entity: sensor.dormitorio_pressure_rpi2mpd

  - type: glance
    title: Estudio
    show_name: false
    columns: 3
    entities:
    - entity: sensor.sensor_study_temperature
    - entity: sensor.sensor_study_humidity
    - entity: sensor.sensor_study_pressure
#    - entity: sensor.sensor_study_illumination

  - type: glance
    title: Cocina
    show_name: false
    columns: 4
    entities:
    - entity: sensor.sensor_kitchen_temperature
    - entity: sensor.sensor_kitchen_humidity
    - entity: sensor.sensor_kitchen_pressure
    - entity: sensor.sensor_kitchen_illumination

  - type: glance
    show_name: false
    title: Office
    columns: 4
    entities:
    - entity: sensor.sensor_office_temperature
    - entity: sensor.sensor_office_humidity
    - entity: sensor.sensor_office_pressure
    - entity: sensor.sensor_office_illumination

  - type: glance
    title: Baño
    show_name: false
    columns: 3
    entities:
    - entity: sensor.sensor_bathroom_ac_temperature
    - entity: sensor.sensor_bathroom_ac_humidity
    - entity: sensor.sensor_bathroom_ac_illumination

  - type: glance
    title: Terraza
    show_name: false
    columns: 4
    entities:
    - entity: sensor.sensor_terraza_temperature
    - entity: sensor.sensor_terraza_humidity
    - entity: sensor.sensor_terraza_pressure
    - entity: sensor.sensor_terraza_illumination

  - type: glance
    title: Galería
    show_name: false
    columns: 2
    entities:
    - entity: sensor.sensor_galeria_temperature
    - entity: sensor.sensor_galeria_humidity

  - type: glance
    title: Hall
    columns: 4
    entities:
#    - light.hall_light
    - entity: binary_sensor.sensor_hall_light_switch
      name: Switch
    - binary_sensor.sensor_hall_relay_1
    - binary_sensor.sensor_hall_relay_2
    - entity: sensor.sensor_hall_illumination
      name:

  - type: vertical-stack
    cards:
    - type: glance
      columns: 4
      title: ACS
      entities:
      - entity: switch.calentador
        name: Heater
      - entity: switch.bomba_circ_acs
        name: Bomba
      - entity: sensor.sensor_acs_probe_5
        name: Ret. Solar
      - entity: sensor.sensor_acs_probe_6
        name: Imp. Solar
      - entity: sensor.sensor_acs_probe_1
        name: Fría
      - entity: sensor.sensor_acs_probe_2
        name: Caliente
      - entity: sensor.sensor_acs_probe_3
        name: Retorno
      - entity: sensor.sensor_acs_probe_4
        name: Superficial

  - type: glance
    columns: 2
    show_name: false
    title: Cuadro
    entities:
    - entity: sensor.local_htu21d_temperature
    - entity: sensor.local_htu21d_humidity

#- icon: mdi:auto-fix
#  title: Home Control
#  cards:
#  - type: entities
#    title: Control Salón
#    entities:
#    - input_number.light_main_slider_salon
#    - input_number.light_temp_slider_salon
#    - input_select.salon_light_scene
#    - light.hall_light
#    - cover.sonoff_cover_ventanal
#    - cover.sonoff_cover_puerta_terraza
#    - light.terraza
#    - climate.termostato_ac
#  - type: entities
#    title: Luces salón
#    entities:
#    - light.bola_grande
#    - light.bola_pequena
#    - light.central
#    - light.pie_tv
#    - light.pie_sofa
#    - light.cuenco
#    - light.lamparita
#    - light.tira
#    - light.yeelight_strip_7811dca21ecf
#  - type: entities
#    title: Luces dormitorio
#    entities:
#    - light.aura_habitacion
#    - light.hue_habitacion
#  - type: entities
#    title: Luces estudio
#    entities:
#    - light.flexo
#    - light.go
#  - type: entities
#    title: Limpieza
#    entities:
#    - vacuum.robot_aspirador
#    - input_select.vacuum_clean_combination

- id: alarmclock
  icon: mdi:alarm
  title: Despertador
  cards:
  - type: entities
    title: Despertador
    show_header_toggle: false
    entities:
    - switch.alarm_clock_status
  #  - input_boolean.alarm_clock_status
    - input_datetime.alarm_clock_time
    - input_datetime.water_boiler_start_time
    - input_boolean.use_heater
    - input_datetime.next_special_wake_up
    - input_select.room_altavoces
    # From rf outlets:
#    - switch.altavoz
    - input_boolean.manual_trigger_lacafetera
  - type: media-control
    entity: media_player.dormitorio
  - type: media-control
    entity: media_player.kodi_tv

- id: network
  icon: mdi:sitemap
  title: Red local
  cards:
  - type: vertical-stack
    cards:
    - type: entities
      title: Family
      show_header_toggle: false
      entities:
      - entity: group.eugenio
      - entity: group.carmen
    - type: glance
      columns: 3
      entities:
      - device_tracker.iphone_bt
      - device_tracker.iphone
      - device_tracker.homeadmin_iphone
    - type: glance
      columns: 4
      entities:
      - device_tracker.iphone_de_carmen_bt
      - device_tracker.iphone_se
      - device_tracker.iphonese
      - device_tracker.homeadmin_iphonese

#  - type: entities
#    title: Links
#    entities:
#    - weblink.grafana
#    - weblink.nas_qnap
#    - weblink.nas_synology
#    - weblink.contabilidad
#    - weblink.hassio_lan
#    - weblink.hassio_pihole
#    - weblink.slave_hass
#    - weblink.enerpi
#    - weblink.motioneye
#    - weblink.kodi_web_interface
#    - weblink.tv_headend
#    - weblink.router_movistar
#    - weblink.wifi_repeater

  - type: entity-filter
    show_empty: true
    state_filter:
      - "not_home"
    card:
      type: glance
      title: Offline
      show_state: false
      columns: 3
    entities:
  #    - group.dt_imac
  #    - group.dt_mbp
  #    - group.dt_ipad
#      - device_tracker.applewatch
#      - device_tracker.applewatch_carmen
  #    - input_boolean.eu_presence
  #    - input_boolean.carmen_presence
#      - device_tracker.konnected_alarm
      - device_tracker.velop_1
      - device_tracker.velop_2
      - device_tracker.velop_3
      - device_tracker.nas_qnap
      - device_tracker.nas_syno
      - device_tracker.hue_bridge
      - device_tracker.yeelight_strip
      - device_tracker.tv_toshiba
      - device_tracker.home_cinema
#      - device_tracker.home_cinema_2
#      - device_tracker.xiaomi_router
      - device_tracker.xiaomi_vacuum
#      - device_tracker.airport_extreme
#      - device_tracker.airport_express_a
#      - device_tracker.airport_express_b
      - device_tracker.printer_brother_hl3140cw
#      - device_tracker.qnap_ubuntu
      - device_tracker.router_movistar
      - device_tracker.switch_salon
#      - device_tracker.wifi_sta_salon
      - device_tracker.deco_movistar
      - device_tracker.rpi3b_libreelec
      - device_tracker.rpi2_bedroom
      # RPI3Docker
      # RPI3 Black?
#      - device_tracker.b827ebee3f3b
      - device_tracker.camera_sricam360
      - device_tracker.camera_kmoon
      - device_tracker.camera_iegeek
      - device_tracker.rpi3dev1
      - device_tracker.rpi3dev1_wifi
      - device_tracker.rpi3dev2
      - device_tracker.rpi3dev2_wifi
      - device_tracker.b827ebbb6a6e
#      - device_tracker.rpi3_osmc
#      - device_tracker.jo01
#      - device_tracker.kindle_1
#      - device_tracker.kindle_2

      # wrover_kit
#      - device_tracker.wrover_kit
      # new wroom32-1 - ener: (WROOM32 (Energy meter))
      - device_tracker.30aea41607a8
      # WROOM32-EVB falso techo Hall
      - device_tracker.esp32_evb_1_wifi
#      - device_tracker.esp32_evb_1_eth
      # WROOM32 Dry-Contact (baño)
      - device_tracker.30aea41960dc
      # Wroom32batt Salón
      - device_tracker.30aea4060680
      # new wroom32-2 - Cocina:
#      - device_tracker.30aea4208170
      - device_tracker.240ac40a6288
      # WROOM32 miniOLED (estudio)
      - device_tracker.30aea4001d1c
      # WROOM32 (dormitorio):
      - device_tracker.30aea4155644
      # WROOM32 (galería)
      - device_tracker.240ac4057954
      # Sparkfun Terraza
      - device_tracker.240ac48124a4
      # WROOM32 Covers living room
      - device_tracker.esp_covers

      # Wemos 8266 Batt (vinoteca)
#      - device_tracker.6001944ed7c4
      # Sparkfun Batt (vinoteca)
      - device_tracker.240ac481661c

      # Wemos OLED (estudio - dev)
      - device_tracker.30aea4132c40
      # Sparkfun (old - galería)
#      - device_tracker.240ac4817724
      # Sparkfun (old - salón)
#      - device_tracker.240ac4817974
      # Sparkfun Old
#      - device_tracker.240ac48163f8
      # RPI Zero Ethernet
#      - device_tracker.00e04c534458

      # Sonoff
#      - device_tracker.6001948433c2
#      # Sonoff (b. acs)
#      - device_tracker.5ccf7faf2f3f
      # Pow
      - device_tracker.5ccf7f9237c1
#      - device_tracker.5ccf7f2aa1fe

      # Wifi plug (bomba acs) (192.168.1.37)
      - device_tracker.dc4f22293a7f

      # Regleta wifi (192.168.1.38)
#      - device_tracker.60019487e707

  - type: glance
#  - type: entities
    title: Speedtest
    columns: 3
    entities:
    - entity: sensor.speedtest_ping
      name: Ping
    - entity: sensor.speedtest_download
      name: Download
    - entity: sensor.speedtest_upload
      name: Upload

#  - type: glance
##  - type: entities
#    title: Pi-Hole
#    show_empty: false
#    entities:
#    - entity: sensor.pihole_ads_blocked_today
#      name: Ads today
#    - entity: sensor.pihole_ads_percentage_blocked_today
#      name: Ads today (%)
#    - entity: sensor.pihole_dns_queries_today
#      name: DNS qs
##    - entity: sensor.pihole_dns_unique_clients
##      name: DNS clients
#    - entity: sensor.pihole_dns_unique_domains
#      name: DNS domains
#  #  - sensor.pihole_domains_blocked

  - type: vertical-stack
    cards:
    - type: entities
      title: Hass.io
      entities:
      - sensor.hass_cpu_temperature
      - sensor.processor_use
      - sensor.memory_free
      - sensor.disk_use_percent_
      - sensor.last_boot
    - type: entities
      title: QNAP
      entities:
      - sensor.nas_home_status
      - sensor.nas_home_cpu_usage
      - sensor.nas_home_memory_usage
      - sensor.nas_home_system_temperature
  #    - sensor.nas_home_temperature_drive_02
  #    - sensor.nas_home_temperature_drive_03
  #    - sensor.nas_home_temperature_drive_04
  #    - sensor.nas_home_smart_status_drive_02
  #    - sensor.nas_home_smart_status_drive_03
  #    - sensor.nas_home_smart_status_drive_04
      - sensor.nas_home_network_down_eth0
      - sensor.nas_home_network_up_eth0
  #    - sensor.nas_home_network_down_eth1
  #    - sensor.nas_home_network_up_eth1
      - sensor.nas_home_volume_used_datavol1
    - type: entities
      title: Otras RPI
      entities:
      - sensor.kodi_cpu_temperature
      - type: divider
      - sensor.rpi3dev1_cpu_temperature
      - sensor.rpi3dev2_cpu_temperature
#      - sensor.rpi3dev3_cpu_temperature

#  dt_imac:
##  hidden: true
#  name: iMac
#  entities:
#    - device_tracker.imac
#    - device_tracker.imac_wifi
#    - device_tracker.imac_bt
#
#dt_mbp:
#  name: MacBook Pro
##  hidden: true
#  entities:
#    - device_tracker.macbook_pro
#    - device_tracker.macbook_pro_bt
#
#dt_ipad:
#  name: iPad
##  hidden: true
#  entities:
#    - device_tracker.ipad
#    - device_tracker.ipad_wifi
#
  - type: glance
    title: Dispositivos
    columns: 3
    entities:
    - group.dt_imac
    - group.dt_mbp
    - group.dt_ipad
    - device_tracker.applewatch
    - device_tracker.applewatch_carmen
#    - input_boolean.eu_presence
#    - input_boolean.carmen_presence
    #  - device_tracker.imac
    #  - device_tracker.imac_wifi
    #  - device_tracker.imac_bt
    #  - device_tracker.macbook_pro
    #  - device_tracker.iphone_bt
    #  - device_tracker.iphone
    #  - device_tracker.homeadmin_iphone
    #  - sensor.iphone_battery_state
    #  - sensor.iphone_battery_level

    #  - device_tracker.iphone_de_carmen_bt
    #  - device_tracker.iphone_se
    #  - device_tracker.homeadmin_iphone_se

    #  - device_tracker.ipad
    #  - device_tracker.ipad_wifi
    #  - sensor.ipad_de_eugenio_battery_level
    #  - sensor.ipad_de_eugenio_battery_state
    - device_tracker.konnected_alarm
    - device_tracker.nas_qnap
    - device_tracker.nas_syno
    - device_tracker.hue_bridge
    - device_tracker.yeelight_strip
    - device_tracker.tv_toshiba
    - device_tracker.home_cinema
    - device_tracker.home_cinema_2
    - device_tracker.rpi3b_libreelec
    - device_tracker.rpi2_bedroom
    - device_tracker.b827ebee3f3b
    - device_tracker.xiaomi_router
    - device_tracker.xiaomi_vacuum
    - device_tracker.airport_extreme
    - device_tracker.airport_express_a
    - device_tracker.airport_express_b
    - device_tracker.printer_brother_hl3140cw
    - device_tracker.qnap_ubuntu
    - device_tracker.router_movistar
    - device_tracker.switch_salon
    - device_tracker.wifi_sta_salon
    - device_tracker.deco_movistar
    - device_tracker.camera_sricam360
    - device_tracker.camera_kmoon
    - device_tracker.camera_iegeek
    - device_tracker.rpi3dev1
    - device_tracker.rpi3dev1_wifi
    - device_tracker.rpi3dev2
    - device_tracker.rpi3dev2_wifi
    - device_tracker.b827ebbb6a6e
    - device_tracker.rpi3_osmc
    - device_tracker.jo01
    - device_tracker.kindle_1
    - device_tracker.kindle_2
  - type: glance
    title: Dev boards
    columns: 3
    entities:
    # wrover_kit
    - device_tracker.wrover_kit
    # new wroom32-1 - ener: (WROOM32 (Energy meter))
    - device_tracker.30aea41607a8
    # WROOM32-EVB falso techo Hall
    - device_tracker.esp32_evb_1_wifi
    - device_tracker.esp32_evb_1_eth
    # WROOM32 Dry-Contact (baño)
    - device_tracker.30aea41960dc
    # Wroom32batt Salón
    - device_tracker.30aea4060680
    # new wroom32-2 - Cocina:
#    - device_tracker.30aea4208170
    - device_tracker.240ac40a6288
    # WROOM32 miniOLED (estudio)
    - device_tracker.30aea4001d1c
    # WROOM32 (dormitorio):
    - device_tracker.30aea4155644
    # WROOM32 (galería)
    - device_tracker.240ac4057954
    # Sparkfun Terraza
    - device_tracker.240ac48124a4
    # WROOM32 Covers living room
    - device_tracker.esp_covers

    # Wemos 8266 Batt (vinoteca)
    - device_tracker.6001944ed7c4
    # Sparkfun Batt (vinoteca)
    - device_tracker.240ac481661c

    # Wemos OLED (estudio - dev)
    - device_tracker.30aea4132c40
    # Sparkfun (old - galería)
    - device_tracker.240ac4817724
    # Sparkfun (old - salón)
    - device_tracker.240ac4817974
    # Sparkfun Old
    - device_tracker.240ac48163f8
    # RPI Zero Ethernet
    - device_tracker.00e04c534458

  - type: glance
    title: Wifi appliances
    columns: 3
    entities:
    # Sonoff
    - device_tracker.6001948433c2
    - device_tracker.5ccf7faf2f3f
    - device_tracker.5ccf7f9237c1
#    - device_tracker.5ccf7f2aa1fe

    # Wifi plug (bomba acs) (192.168.1.37)
    - device_tracker.dc4f22293a7f

    # Regleta wifi (192.168.1.38)
    - device_tracker.60019487e707

  - type: vertical-stack
    cards:
    - type: glance
      title: iPhone X
      show_name: false
      columns: 2
      entities:
      - entity: sensor.iphone_battery_state
        name: State
      - entity: sensor.iphone_battery_level
        name: Level
#      - sensor.bateria_iphone_x
    - type: glance
      title: iPhone SE
      show_name: false
      columns: 2
      entities:
      - entity: sensor.iphone_de_maria_del_carmen_battery_state
      - entity: sensor.iphone_de_maria_del_carmen_battery_level
#      - sensor.bateria_iphone_se
    - type: glance
      title: "iPad"
      show_name: false
      columns: 2
      entities:
      - entity: sensor.ipad_de_eugenio_battery_state
      - entity: sensor.ipad_de_eugenio_battery_level

  - type: entities
    title: Smarty
    show_empty: false
    entities:
    - device_tracker.30aea443c180

  - type: entity-filter
    entities:
      - device_tracker.iphone6s_de_carlos_ortega
      - device_tracker.nokia_130
      - device_tracker.huawei_y7
      - device_tracker.artes
      - device_tracker.huawei_p10
      - device_tracker.mi6
      - device_tracker.elena_
      - device_tracker.desktop4rp450i
      - device_tracker.galaxy_j5
    show_empty: false
    state_filter:
      - "home"
    card:
      type: glance
      show_state: false
      columns: 3
      title: Vecinos cercanos

- id: esp32
  icon: mdi:developer-board
  title: ESP32 devices
  cards:
  - type: history-graph
    title: 'ESP # samples'
    refresh_interval: 60
    hours_to_show: 6
    entities:
    - entity: sensor.sensor_livingroom_snum
      name: Salón
    - entity: sensor.sensor_covers_snum
      name: Persianas
    - entity: sensor.sensor_kitchen_snum
      name: Cocina
    - entity: sensor.sensor_hall_snum
      name: Hall
    - entity: sensor.sensor_study_snum
      name: Estudio
    - entity: sensor.sensor_office_snum
      name: Office
    - entity: sensor.sensor_bedroom_snum
      name: Dormitorio
    - entity: sensor.sensor_bathroom_ac_snum
      name: Baño
    - entity: sensor.sensor_terraza_snum
      name: Terraza
    - entity: sensor.sensor_galeria_snum
      name: Galería

  - type: entities
    entities:
    - entity: sensor.sensor_livingroom_snum
      name: Salón
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_livingroom_snum
      attributes:
        - wifi_ap
        - rssi
        - ip
    - entity: sensor.sensor_covers_snum
      name: Persianas
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_covers_snum
      attributes:
        - cover1_position
        - cover2_position
        - wifi_ap
        - rssi
        - ip
    - entity: sensor.sensor_kitchen_snum
      name: Cocina
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_kitchen_snum
      attributes:
        - wifi_ap
        - rssi
        - ip
    - entity: sensor.sensor_hall_snum
      name: Hall
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_hall_snum
      attributes:
        - wifi_ap
        - rssi
        - ip
    - entity: sensor.sensor_study_snum
      name: Estudio
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_study_snum
      attributes:
        - wifi_ap
        - rssi
        - ip
    - entity: sensor.sensor_office_snum
      name: Office
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_office_snum
      attributes:
        - wifi_ap
        - rssi
        - ip
    - entity: sensor.sensor_bedroom_snum
      name: Dormitorio
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_bedroom_snum
      attributes:
        - wifi_ap
        - rssi
        - ip
    - entity: sensor.sensor_bathroom_ac_snum
      name: Baño
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_bathroom_ac_snum
      attributes:
        - wifi_ap
        - rssi
        - ip
    - entity: sensor.sensor_wine_snum
      name: Vinoteca
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_wine_snum
      attributes:
        - wifi_ap
        - rssi
        - ip
#    - type: divider
    - entity: sensor.sensor_terraza_snum
      name: Terraza
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_terraza_snum
      attributes:
        - wifi_ap
        - rssi
        - ip
    - entity: sensor.sensor_galeria_snum
      name: Galería
      icon: mdi:developer-board
      secondary_info: 'last-changed'
    - type: "custom:entity-attributes-card"
      entity: sensor.sensor_galeria_snum
      attributes:
        - wifi_ap
        - rssi
        - ip


#esp32_conectivity:
  - type: glance
    title: Conectivity
    columns: 4
    show_state: false
    entities:
    - entity: binary_sensor.esp32_ener_online
      name: Cuadro
    - entity: binary_sensor.sensor_livingroom_online
      name: Salón
    - entity: binary_sensor.sensor_kitchen_online
      name: Cocina
    - entity: binary_sensor.sensor_hall_online
      name: Hall
    - entity: binary_sensor.sensor_study_online
      name: Estudio
    - entity: binary_sensor.sensor_office_online
      name: Office
    - entity: binary_sensor.sensor_bedroom_online
      name: Dormitorio
    - entity: binary_sensor.sensor_bathroom_ac_online
      name: Baño
    - entity: binary_sensor.sensor_terraza_online
      name: Terraza
    - entity: binary_sensor.sensor_galeria_online
      name: Galería
    - entity: binary_sensor.sensor_covers_online
      name: Persianas
    - entity: binary_sensor.sensor_wine_online
      name: Cava

  - type: entity-filter
#    title: Tracking
    entities:
    # new wroom32-1 - ener: (WROOM32 (Energy meter))
    - device_tracker.30aea41607a8
    # Wroom32batt Salón
    - device_tracker.30aea4060680
    # new wroom32-2 - Cocina:
#    - device_tracker.30aea4208170
    - device_tracker.240ac40a6288
    # WROOM32-EVB falso techo Hall
    - device_tracker.esp32_evb_1_wifi
    # WROOM32 miniOLED (estudio)
    - device_tracker.30aea4001d1c
    # Wemos OLED (estudio - dev)
    - device_tracker.30aea4132c40
    # WROOM32 (dormitorio):
    - device_tracker.30aea4155644
    # WROOM32 Dry-Contact (baño)
    - device_tracker.30aea41960dc
    # Sparkfun Terraza
    - device_tracker.240ac48124a4
    # WROOM32 (galería)
    - device_tracker.240ac4057954
    # WROOM32 Covers living room
    - device_tracker.esp_covers
    # WROOM32 TEST
    - device_tracker.240ac40a6288
    # Sparkfun Batt (vinoteca)
    - device_tracker.240ac481661c

    # Sparkfun Old/test
    - device_tracker.240ac48163f8

    # Sparkfun (old - galería)
    - device_tracker.240ac4817724
    # Sparkfun (old - salón)
    - device_tracker.240ac4817974
    show_empty: false
    state_filter:
        - 'off'
    card:
      type: entities
      title: Offline
      show_state: false
#      show_name: false
#      secondary_info: 'last-changed'

  - type: entities
    title: Time drift
    entities:
    - sensor.sensor_power_time_drift
    - sensor.sensor_livingroom_time_drift
    - sensor.sensor_kitchen_time_drift
    - sensor.sensor_hall_time_drift
    - sensor.sensor_study_time_drift
    - sensor.sensor_office_time_drift
    - sensor.sensor_bedroom_time_drift
    - sensor.sensor_bathroom_ac_time_drift
    - sensor.sensor_terraza_time_drift
    - sensor.sensor_galeria_time_drift
    - sensor.sensor_covers_time_drift

- id: settings
  icon: mdi:settings
  title: Master configuration
  cards:
  - type: entity-filter
    entities:
    - binary_sensor.router_on
    - binary_sensor.dormitorio_online_rpi2
    - binary_sensor.esp32_ener_online
    - binary_sensor.dormitorio_online
    - binary_sensor.sensor_livingroom_online
    - binary_sensor.sensor_kitchen_online
    - binary_sensor.sensor_hall_online
    - binary_sensor.sensor_study_online
    - binary_sensor.sensor_office_online
    - binary_sensor.sensor_bedroom_online
    - binary_sensor.sensor_bathroom_ac_online
    - binary_sensor.sensor_terraza_online
    - binary_sensor.sensor_galeria_online
    - binary_sensor.sensor_covers_online
#    - binary_sensor.vinoteca_online
#    - binary_sensor.sensor_wine_online
    - binary_sensor.nas_online
    show_empty: false
    state_filter:
        - 'off'
    card:
      type: entities
      title: Offline
      show_name: false
#      secondary_info: 'last-changed'

  - type: vertical-stack
    cards:
    - type: glance
      columns: 3
      entities:
      - binary_sensor.workday_sensor
      - sensor.season
      - sun.sun
    - type: entities
#      show_header_toggle: false
      entities:
#      - sensor.hue_dimmer_switch
#      - input_boolean.switch_motion_lights
#      - input_number.light_duration_after_motion
#      - input_boolean.switch_control_enerpi_max_power
#      - input_number.enerpi_max_power
#      - input_number.enerpi_max_power_reset
      - entity: sensor.telegram_default_chatid
        secondary_info: 'last-changed'
      - entity: script.good_night
        secondary_info: 'last-changed'
      - entity: script.good_morning
        secondary_info: 'last-changed'
    #    - script.start_status_sonoff_outlets
      - script.set_mid_position_cover_1
      - script.set_mid_position_cover_2

  - type: entities
    title: Conectivity
    entities:
    - entity: binary_sensor.services_notok
      secondary_info: 'last-changed'
    - entity: binary_sensor.internet_online
      secondary_info: 'last-changed'
    - entity: sensor.ip_externa
      secondary_info: 'last-changed'
    - sensor.uptime
    - sensor.ssl_certificate_expiry

  - type: "custom:monster-card"
    card:
      type: glance
#      type: entities
      title: All scripts
      columns: 4
      show_header_toggle: false
    filter:
      include:
        - domain: script
      exclude:
        - entity_id: script.good_night
        - entity_id: script.good_morning
  #        - entity_id: script.start_status_sonoff_outlets
        - entity_id: script.set_mid_position_cover_1
        - entity_id: script.set_mid_position_cover_2

  - type: "custom:monster-card"
    card:
      type: glance
      show_state: false
      columns: 3
      title: Scenes
    filter:
      include:
        - domain: scene

  - type: entity-filter
    entities:
    - automation.encendido_luces_estudio
    - automation.encendido_luces_dormitorio
    - automation.luz_hall_abriendo_cuadro
    - automation.sync_tira_tv_con_tira_sofa
    - automation.salon_select_scene
    - automation.brillo_salon
    - automation.tono_salon
    - automation.encendido_de_tv_si_apagada_y_kodi_play
    - automation.apagado_de_tv_si_encendida_y_kodi_en_idle_10_min
    - automation.encendido_automatico_de_cam_salon
    - automation.apagado_de_cam_salon_en_kodi_play_nocturno

    - automation.start_homeassistant
    - automation.notify_sunset
    - automation.update_notifications
    - automation.corrige_cambio_de_ip
    - automation.notificacion_de_cambio_de_ip
    - automation.aviso_de_sensor_mqtt_offline
    - automation.new_bt_device_notifier
    - automation.carmen_sale_del_hospital
    - automation.carmen_llega_al_hospital

    - automation.buenas_noches
    - automation.apagado_automatico_de_termo_acs
    - automation.apagado_automatico_de_enchufes_a_las_6h
    - automation.retry_etekcity_commands
    - automation.vacuum_select_rooms_to_clean
    - automation.botvac_error_notification
    - automation.botvac_reset_select_command
    show_empty: false
    state_filter:
        - 'off'
    card:
      type: entities
#      secondary_info: 'last-changed'
#      type: glance
      title: Disabled automations

  - type: entity-filter
    entities:
    - automation.encendido_luces_estudio
    - automation.encendido_luces_dormitorio
    - automation.luz_hall_abriendo_cuadro
    - automation.sync_tira_tv_con_tira_sofa
    - automation.salon_select_scene
    - automation.brillo_salon
    - automation.tono_salon
    - automation.encendido_de_tv_si_apagada_y_kodi_play
    - automation.apagado_de_tv_si_encendida_y_kodi_en_idle__10_min
    - automation.encendido_automatico_de_cam_salon
    - automation.apagado_de_cam_salon_en_kodi_play_nocturno

    - automation.start_homeassistant
    - automation.notify_sunset
    - automation.update_notifications
    - automation.corrige_cambio_de_ip
    - automation.notificacion_de_cambio_de_ip
    - automation.aviso_de_sensor_mqtt_offline
    - automation.new_bt_device_notifier
    - automation.carmen_sale_del_hospital
    - automation.carmen_llega_al_hospital

    - automation.buenas_noches
    - automation.apagado_automatico_de_termo_acs
    - automation.apagado_automatico_de_enchufes_a_las_6h
    - automation.retry_etekcity_commands
    - automation.vacuum_select_rooms_to_clean
    - automation.botvac_error_notification
    - automation.botvac_reset_select_command
    show_empty: false
    state_filter:
        - 'on'
    card:
      type: glance
      show_state: false
      columns: 4
      title: Enabled automations

- id: debug
  title: DEBUG
  tab_icon: mdi:settings
  cards:
  - type: map
    aspect_ratio: 100%
    entities:
      - entity: device_tracker.homeadmin_iphonese
      - entity: device_tracker.iphonese
#      - zone.home

  - type: picture-elements
    image: /local/custom_ui/floorplan/floorplan-lovelace.svg
    elements:
      - type: state-label
        entity: sensor.dormitorio_temperature_rpi2mpd
        style:
          top: 86%
          left: 79%
      - type: state-label
        entity: sensor.sensor_livingroom_temperature
        style:
          top: 60%
          left: 33%
          font-family: "Gill Sans"
          font-size: 1.5em
          font-style: bold
      - type: state-label
        entity: sensor.sensor_livingroom_humidity
        style:
          top: 62%
          left: 33%
          font-color: yellow
          font-family: "Gill Sans"
          font-size: 1.3em
          alignment: center
      - type: state-label
        entity: sensor.sensor_study_temperature
        style:
          top: 23%
          left: 51%
          background-color: blue
      - type: state-label
        entity: sensor.sensor_office_temperature
        style:
          top: 23%
          left: 78%
          font-family: "Gill Sans"
          font-size: 2em
      - type: state-label
        entity: sensor.sensor_kitchen_temperature
        style:
          top: 23%
          left: 37%
          scale: 2em
      - type: state-label
        entity: sensor.sensor_bathroom_ac_temperature
        style:
          top: 47%
          left: 85%
          color: red

      - type: state-icon
        tap_action: toggle
        entity: light.hall_light
        style:
          top: 47%
          left: 36%
          scale: 200%
      - type: state-icon
        tap_action: toggle
        entity: light.terraza
        style:
          top: 93%
          left: 48%
          font-size: 3em

      - type: state-badge
        entity: media_player.kodi_tv
        style:
          top: 77%
          left: 56%

      - type: state-badge
        entity: camera.sricam_360
        title:
        style:
          top: 84%
          left: 28%
      - type: state-badge
        entity: camera.iegeek_hd
        style:
          top: 21%
          left: 93%
      - type: state-badge
        entity: camera.kmoon_ipcam100
        name:
        style:
          top: 91%
          left: 63%
